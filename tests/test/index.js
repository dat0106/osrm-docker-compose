const assert = require('assert');
const axios = require('axios');

// Seattle

const seattlePairs = [
    [[47.6015953, -122.3344915], [47.6259655, -122.3390394]],
    [[47.6248211, -122.3471621], [47.6162967, -122.3437804]],
    [[47.6153701, -122.3484703], [47.6013645, -122.3345574]],
    [[47.6091129, -122.3288441], [47.6238863, -122.3557863]],
    [[47.6162159, -122.3440125], [47.6114621, -122.3448254]],
    [[47.5963370, -122.3114360], [47.6203022, -122.3212602]],
    [[47.6217617, -122.3211004], [47.6150084, -122.3477477]],
    [[47.6287704, -122.3317388], [47.6183600, -122.3405150]],
    [[47.5988709, -122.3163755], [47.6515382, -122.3525420]],
    [[47.6005741, -122.3275267], [47.6150474, -122.3478838]],
    [[47.6521131, -122.3527267], [47.6660536, -122.3832219]],
    [[47.6623509, -122.3135472], [47.6101953, -122.3417312]],
    [[47.6200878, -122.3201064], [47.6767480, -122.3468756]],
    [[47.6139572, -122.3470713], [47.6171110, -122.3464964]],
    [[47.6155158, -122.3441465], [47.6646081, -122.3808452]],
    [[47.6646239, -122.3127929], [47.6412424, -122.3203283]],
    [[47.6402516, -122.3999445], [47.6392797, -122.3975419]],
    [[47.6750894, -122.3178865], [47.6751096, -122.3178529]],
    [[47.6139061, -122.3224921], [47.6138400, -122.3197200]],
    [[47.6235936, -122.3567067], [47.5993186, -122.3160029]],
    [[47.6861166, -122.3448469], [47.6147600, -122.3452800]],
    [[47.6690674, -122.3175880], [47.6146801, -122.3210425]],
    [[47.5605369, -122.3871960], [47.6068868, -122.3382849]],
    [[47.6531801, -122.3574267], [47.6781872, -122.3275917]],
    [[47.6108756, -122.3164212], [47.6144260, -122.3190610]]
];

describe('It routes bad points', function () {
   describe('Routing', function () {
       seattlePairs.forEach((pair) => {
          const [[lat1, lon1], [lat2, lon2]] = pair;
          it('gets a valid route response', async function () {
              const response = await axios.get(`http://localhost:5000/route/v1/driving/${lon1},${lat1};${lon2},${lat2}?overview=false&alternatives=true&steps=true&hints=;`, {
                  headers: {
                      'Allow-Access-Origin': '*'
                  },
                  cors: true
              });
              const data = response.data.routes;
              console.warn(data);
              assert.notEqual(data, null);
          });
       });
   })
});
